# some generic settings
set output-radix 0x10
set pagination off
set confirm off
set verbose off

# make extra commands available
python import os, sys
python sys.path.append(os.path.join(os.getcwd(), 'sys'))
python import debug
python import os.path
python print('binary:', gdb.current_progspace().filename)
python print('cwd:', os.getcwd())

# launch kernel tests and wait for ktest_main to finish
break panic_fail
commands
info registers
# cpu tlb # XXX it sometimes hangs
backtrace full
kthread
kproc
klog
kill
quit 1
end

break ktest_end
commands
kill
quit 0
end

cont
