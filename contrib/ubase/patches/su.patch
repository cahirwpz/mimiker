Index: ubase/ubase/su.c
===================================================================
--- ubase.orig/ubase/su.c	2023-01-15 19:20:19.905757256 +0100
+++ ubase/ubase/su.c	2023-01-18 18:50:27.759922567 +0100
@@ -21,9 +21,9 @@
 static int
 dologin(struct passwd *pw)
 {
-	char *shell = pw->pw_shell[0] == '\0' ? "/bin/sh" : pw->pw_shell;
+	const char *shell = pw->pw_shell[0] == '\0' ? "/bin/sh" : pw->pw_shell;
 	char *term = getenv("TERM");
-	clearenv();
+	environ = NULL;
 	setenv("HOME", pw->pw_dir, 1);
 	setenv("SHELL", shell, 1);
 	setenv("USER", pw->pw_name, 1);
@@ -50,7 +50,7 @@
 main(int argc, char *argv[])
 {
 	char *usr = "root", *pass;
-	char *shell;
+	const char *shell;
 	struct passwd *pw;
 	char *newargv[2];
 	uid_t uid;
@@ -102,7 +102,7 @@
 		return dologin(pw);
 	} else {
 		shell = pw->pw_shell[0] == '\0' ? "/bin/sh" : pw->pw_shell;
-		newargv[0] = shell;
+		newargv[0] = (char *)shell;
 		newargv[1] = NULL;
 		if (!pflag) {
 			setenv("HOME", pw->pw_dir, 1);
