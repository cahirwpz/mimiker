$name="vexriscv"

using sysbus

mach create $name
machine LoadPlatformDescription @sys/renode/platforms/vexriscv.repl

### Launch script uses socket terminal integration for UARTs.

$dtb=@sys/dts/vexriscv.dtb
$kernel=@sys/mimiker.img
$opensbi=@../opensbi/build/platform/litex/vexriscv/firmware/fw_jump.bin

macro reset
"""
    sysbus LoadBinary $dtb     0x82200000
    sysbus LoadBinary $kernel  0x80400000
    sysbus LoadBinary $opensbi 0x80000000

    cpu PC 0x80000000
"""

runMacro $reset
